<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Recomended workflow</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Recomended workflow</h1>



<div id="setup-and-prerequsites" class="section level2">
<h2>Setup and prerequsites</h2>
<div id="used-libraries" class="section level3">
<h3>Used libraries</h3>
<p>The <em>keywordr</em> package is designed to work well with <a href="https://www.tidyverse.org/">tidyverse</a> and I always iclude it in libraries.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(keywordr)</a></code></pre></div>
</div>
<div id="input-data" class="section level3">
<h3>Input data</h3>
<p>As input data you can use either a CSV export from <a href="https://www.marketingminer.com/en">Marketing Miner</a> called <em>Keyword Suggestions</em> or a dataframe (or <em>tibble</em>) with the following structure:</p>
<pre><code>#&gt; &#39;data.frame&#39;:    0 obs. of  5 variables:
#&gt;  $ query : chr 
#&gt;  $ volume: int 
#&gt;  $ cpc   : num 
#&gt;  $ input : chr 
#&gt;  $ source: chr</code></pre>
<p>Only the first two columns are required, the other three (<code>cpc</code>, <code>input</code> and <code>source</code>) are optional.</p>
<p>For the purposes of this tutorial, I will use the first method and prepare the input data first.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">input_data &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="op">~</span>query,             <span class="op">~</span>volume,</a>
<a class="sourceLine" id="cb3-3" title="3">  <span class="st">&quot;seo&quot;</span>,                <span class="dv">96000</span>,</a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="st">&quot;seo ye-ji&quot;</span>,          <span class="dv">22000</span>,</a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="st">&quot;seo meaning&quot;</span>,         <span class="dv">6700</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="st">&quot;seo services&quot;</span>,        <span class="dv">6400</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="st">&quot;seo ye ji&quot;</span>,           <span class="dv">6000</span>,</a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="st">&quot;what is a seo&quot;</span>,       <span class="dv">5300</span>,</a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="st">&quot;seo london&quot;</span>,          <span class="dv">5000</span>,</a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="st">&quot;what is seo&quot;</span>,         <span class="dv">4800</span>,</a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="st">&quot;seo agency&quot;</span>,          <span class="dv">4300</span>,</a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="st">&quot;joe seo&quot;</span>,             <span class="dv">4300</span>,</a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="st">&quot;seo company&quot;</span>,         <span class="dv">4200</span>,</a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="st">&quot;london seo agencies&quot;</span>, <span class="dv">4100</span>,</a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="st">&quot;seo consultant&quot;</span>,      <span class="dv">3500</span>,</a>
<a class="sourceLine" id="cb3-16" title="16">  <span class="st">&quot;seo service&quot;</span>,         <span class="dv">3500</span>,</a>
<a class="sourceLine" id="cb3-17" title="17">  <span class="st">&quot;seo company london&quot;</span>,  <span class="dv">2500</span>,</a>
<a class="sourceLine" id="cb3-18" title="18">  <span class="st">&quot;seo agencies london&quot;</span>, <span class="dv">2500</span>,</a>
<a class="sourceLine" id="cb3-19" title="19">  <span class="st">&quot;seo agency london&quot;</span>,   <span class="dv">2400</span>,</a>
<a class="sourceLine" id="cb3-20" title="20">  <span class="st">&quot;seo services london&quot;</span>, <span class="dv">2400</span>,</a>
<a class="sourceLine" id="cb3-21" title="21">  <span class="st">&quot;seo consultants&quot;</span>,     <span class="dv">2300</span>,</a>
<a class="sourceLine" id="cb3-22" title="22">  <span class="st">&quot;local seo&quot;</span>,           <span class="dv">2200</span>,</a>
<a class="sourceLine" id="cb3-23" title="23">  <span class="st">&quot;local seo services&quot;</span>,  <span class="dv">2000</span></a>
<a class="sourceLine" id="cb3-24" title="24">)</a>
<a class="sourceLine" id="cb3-25" title="25"><span class="kw">print</span>(input_data, <span class="dt">n =</span> <span class="dv">25</span>)</a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">#&gt; # A tibble: 21 × 2</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt;    query               volume</span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt;    &lt;chr&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">#&gt;  1 seo                  96000</span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">#&gt;  2 seo ye-ji            22000</span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co">#&gt;  3 seo meaning           6700</span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">#&gt;  4 seo services          6400</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co">#&gt;  5 seo ye ji             6000</span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="co">#&gt;  6 what is a seo         5300</span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co">#&gt;  7 seo london            5000</span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="co">#&gt;  8 what is seo           4800</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">#&gt;  9 seo agency            4300</span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">#&gt; 10 joe seo               4300</span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">#&gt; 11 seo company           4200</span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt; 12 london seo agencies   4100</span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">#&gt; 13 seo consultant        3500</span></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">#&gt; 14 seo service           3500</span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="co">#&gt; 15 seo company london    2500</span></a>
<a class="sourceLine" id="cb3-44" title="44"><span class="co">#&gt; 16 seo agencies london   2500</span></a>
<a class="sourceLine" id="cb3-45" title="45"><span class="co">#&gt; 17 seo agency london     2400</span></a>
<a class="sourceLine" id="cb3-46" title="46"><span class="co">#&gt; 18 seo services london   2400</span></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="co">#&gt; 19 seo consultants       2300</span></a>
<a class="sourceLine" id="cb3-48" title="48"><span class="co">#&gt; 20 local seo             2200</span></a>
<a class="sourceLine" id="cb3-49" title="49"><span class="co">#&gt; 21 local seo services    2000</span></a></code></pre></div>
</div>
<div id="a-kwresearch-object" class="section level3">
<h3>A <code>kwresearch</code> object</h3>
<p>All data is stored in an object of class <code>kwresearch</code> during keyword analysis. Therefore, create such an object, called for example <code>kwr</code>, right at the beginning. In the same function call, you can also import input data into it. For English (or other languages that do not use diacritics), I recommend setting <code>accentize</code> to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">kwr &lt;-<span class="st"> </span><span class="kw">kwresearch</span>(input_data, <span class="dt">accentize =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Now you can check the data are in.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_queries</span>()</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; # A tibble: 19 × 7</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt;    query_normalized    n_queries volume   cpc query_original        input source</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;    &lt;chr&gt;                   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt;  1 seo                         1  96000    NA seo                   &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt;  2 seo ye-ji                   2  28000    NA seo ye-ji,seo ye ji   &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt;  3 seo meaning                 1   6700    NA seo meaning           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;  4 london seo agencies         2   6600    NA london seo agencies,… &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt;  5 seo services                1   6400    NA seo services          &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;  6 what is a seo               1   5300    NA what is a seo         &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;  7 seo london                  1   5000    NA seo london            &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt;  8 what is seo                 1   4800    NA what is seo           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt;  9 joe seo                     1   4300    NA joe seo               &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; 10 seo agency                  1   4300    NA seo agency            &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; 11 seo company                 1   4200    NA seo company           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt; 12 seo consultant              1   3500    NA seo consultant        &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; 13 seo service                 1   3500    NA seo service           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; 14 seo company london          1   2500    NA seo company london    &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; 15 seo agency london           1   2400    NA seo agency london     &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; 16 seo services london         1   2400    NA seo services london   &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt; 17 seo consultants             1   2300    NA seo consultants       &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt; 18 local seo                   1   2200    NA local seo             &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">#&gt; 19 local seo services          1   2000    NA local seo services    &lt;NA&gt;  &lt;NA&gt;</span></a></code></pre></div>
<p>Note that queries ‘seo ye-ji’ and ‘seo ye ji’ were combined together. Tis is the result of <em>normalization</em>, which tries to unify queries that differ only by punctuation, accents or order of words. If you don’t like the result, you can switch normalization off with the <code>normalize</code> argument.</p>
<p>You are ready for pruning and classification now.</p>
</div>
</div>
<div id="pruning" class="section level2">
<h2>Pruning</h2>
<p>Pruning is a process in which you remove irrelevant queries. While they still remain in the source data and can be displayed in some outputs, they do not bother you during classification.</p>
<p>Your task is to find the patterns that determine the irrelevant queries and to specify these patterns as regular expressions. Because there are so few queries in the example, we can spot these formulas at a glance. They are the words or phrases ‘ye-ji’ and ‘joe’.</p>
<p>You remove the queries matching these patterns as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">recipe_file &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;recipes.yml&quot;</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">kwr_add_pattern</span>(<span class="st">&quot;ye-ji&quot;</span>, recipe_file, <span class="dt">recipe_type =</span> <span class="st">&quot;remove&quot;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">kwr_add_pattern</span>(<span class="st">&quot;joe&quot;</span>, recipe_file, <span class="dt">recipe_type =</span> <span class="st">&quot;remove&quot;</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"></a>
<a class="sourceLine" id="cb6-6" title="6">kwr &lt;-<span class="st"> </span>kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">  </span><span class="kw">kwr_prune</span>(recipe_file)</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; Removing queries...</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt; Removed 2 queries out of 19. Duration: 0.007s</span></a></code></pre></div>
<p>If you check the queries now, you will find that the irrelevant ones are already missing.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_queries</span>()</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="co">#&gt; # A tibble: 17 × 7</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt;    query_normalized    n_queries volume   cpc query_original        input source</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt;    &lt;chr&gt;                   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt; &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;  1 seo                         1  96000    NA seo                   &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt;  2 seo meaning                 1   6700    NA seo meaning           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;  3 london seo agencies         2   6600    NA london seo agencies,… &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt;  4 seo services                1   6400    NA seo services          &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;  5 what is a seo               1   5300    NA what is a seo         &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt;  6 seo london                  1   5000    NA seo london            &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;  7 what is seo                 1   4800    NA what is seo           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt;  8 seo agency                  1   4300    NA seo agency            &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;  9 seo company                 1   4200    NA seo company           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt; 10 seo consultant              1   3500    NA seo consultant        &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt; 11 seo service                 1   3500    NA seo service           &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt; 12 seo company london          1   2500    NA seo company london    &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt; 13 seo agency london           1   2400    NA seo agency london     &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">#&gt; 14 seo services london         1   2400    NA seo services london   &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#&gt; 15 seo consultants             1   2300    NA seo consultants       &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt; 16 local seo                   1   2200    NA local seo             &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt; 17 local seo services          1   2000    NA local seo services    &lt;NA&gt;  &lt;NA&gt;</span></a></code></pre></div>
<div id="what-exactly-happened" class="section level4">
<h4>What exactly happened</h4>
<p>Using the <code>kwr_add_pattern</code> function, you created a recipe file called ‘recipes.yml’ in the temporary directory and wrote the ‘ye-ji’ and ‘joe’ patterns into it. The recipe type is <code>remove</code>, which means that queries matching the recipe should be removed. You can read more about recipes and their structure in the ‘Removal and classification recipes’ vignette.</p>
<p>You then applied the <code>kwr_prune</code> function to the <code>kwr</code> object, which executed all recipes with type <code>remove</code> from the recipe file.</p>
<p>On such small data the effect of this method does not show much, but consider that on data of the usual size one pattern can capture and thus remove possibly hundreds of queries.</p>
</div>
</div>
<div id="classification" class="section level2">
<h2>Classification</h2>
<p>Your next and actually main task is to classify the queries. We will start with exploration, which is supported by three functions: <code>kwr_subqueries</code>, <code>kwr_collocations</code> and <code>kwr_ngrams</code>.</p>
<div id="exploration" class="section level3">
<h3>Exploration</h3>
<div id="n-grams" class="section level4">
<h4>N-grams</h4>
<p>The <code>kwr_ngrams</code> function returns so-called n-grams, i.e. single words or multi-word phrases contained in the queries. The output is sorted by the number of queries in which the n-gram is found, however you can reorder it using the <code>arrange</code> function from the <em>dplyr</em> package by search volume.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_ngrams</span>()</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; # A tibble: 19 × 3</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt;    token                   n volume</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt;    &lt;chr&gt;               &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt;  1 seo                    17 160100</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt;  2 london                  5  18900</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt;  3 seo services            3  10800</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt;  4 what is                 2  10100</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt;  5 seo agency              2   6700</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt;  6 seo company             2   6700</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt;  7 local seo               2   4200</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt;  8 seo meaning             1   6700</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt;  9 london seo agencies     1   6600</span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt; 10 what is a seo           1   5300</span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt; 11 seo london              1   5000</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt; 12 what is seo             1   4800</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">#&gt; 13 seo consultant          1   3500</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">#&gt; 14 seo service             1   3500</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co">#&gt; 15 seo company london      1   2500</span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#&gt; 16 seo agency london       1   2400</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt; 17 seo services london     1   2400</span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt; 18 seo consultants         1   2300</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="co">#&gt; 19 local seo services      1   2000</span></a></code></pre></div>
</div>
<div id="subqueries" class="section level4">
<h4>Subqueries</h4>
<p>Subqueries are essentially n-grams that also exist as separate queries. In other words, they are queries that are entirely and exactly contained in other, longer queries.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_subqueries</span>()</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#&gt; # A tibble: 5 × 3</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#&gt;   token            n volume</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt; 1 seo             16  64100</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt; 2 seo services     2   4400</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt; 3 seo company      1   2500</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt; 4 seo agency       1   2400</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt; 5 local seo        1   2000</span></a></code></pre></div>
</div>
<div id="collocations" class="section level4">
<h4>Collocations</h4>
<p>Collocations are at least two-word phrases that are more likely to occur in queries than the single words that make them up. They are useful for detecting typical multi-word phrases.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_collocations</span>()</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">#&gt; # A tibble: 5 × 6</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt;   collocation  count count_nested length lambda     z</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt;   &lt;chr&gt;        &lt;int&gt;        &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; 1 what is          2            2      2   5.42  2.57</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt; 2 local seo        2            1      2   3.33  2.01</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; 3 seo services     3            2      2   2.04  1.30</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; 4 seo agency       2            1      2   1.61  1.00</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; 5 seo company      2            1      2   1.61  1.00</span></a></code></pre></div>
</div>
</div>
<div id="pattern-testing" class="section level3">
<h3>Pattern testing</h3>
<p>When you discover a useful pattern during your research, it’s a good idea to test it. The <code>kwr_test_regex</code> function is used for this purpose.</p>
<p>Let’s try the pattern ‘agenc’.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">pattern &lt;-<span class="st"> &quot;agenc&quot;</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">kwr_test_regex</span>(kwr, pattern)</a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co">#&gt; $full</span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; # A tibble: 3 × 5</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt;   query_normalized    pred       word     succ     match</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">#&gt; 1 london seo agencies london seo agencies &quot;&quot;       agenc</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt; 2 seo agency          seo        agency   &quot;&quot;       agenc</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; 3 seo agency london   seo        agency   &quot;london&quot; agenc</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">#&gt; $words</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">#&gt; # A tibble: 2 × 2</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt;   word         n</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">#&gt;   &lt;chr&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co">#&gt; 1 agency       2</span></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="co">#&gt; 2 agencies     1</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="co">#&gt; $around</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="co">#&gt; # A tibble: 3 × 2</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="co">#&gt;   around         n</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="co">#&gt;   &lt;chr&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-22" title="22"><span class="co">#&gt; 1 seo            2</span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="co">#&gt; 2 london         1</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="co">#&gt; 3 london seo     1</span></a>
<a class="sourceLine" id="cb11-25" title="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb11-26" title="26"><span class="co">#&gt; $around_ngrams</span></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="co">#&gt; # A tibble: 3 × 2</span></a>
<a class="sourceLine" id="cb11-28" title="28"><span class="co">#&gt;   token          n</span></a>
<a class="sourceLine" id="cb11-29" title="29"><span class="co">#&gt;   &lt;chr&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb11-30" title="30"><span class="co">#&gt; 1 london         2</span></a>
<a class="sourceLine" id="cb11-31" title="31"><span class="co">#&gt; 2 seo            2</span></a>
<a class="sourceLine" id="cb11-32" title="32"><span class="co">#&gt; 3 london seo     1</span></a></code></pre></div>
<p>As a result you get 4 tables:</p>
<ul>
<li>The first one contains all the queries that match the formula, and from the other columns you can clearly see what is before and after the matched text in the queries.</li>
<li>The second contains a list of the full words or phrases that match the pattern.</li>
<li>The third contains a list of unique texts that are located before and after the text that matches the pattern.</li>
<li>Finally, the fourth contains the n-grams constructed from the texts in the third table.</li>
</ul>
</div>
<div id="recipe-creation-and-the-classification-itself" class="section level3">
<h3>Recipe creation and the classification itself</h3>
<p>After you have tested it, you create a classification recipe from the pattern, just as you have previously created pruning recipes. Then you call the <code>kwr_classify</code> function.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">kwr_add_pattern</span>(</a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">pattern =</span> pattern,</a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">recipe_file =</span> recipe_file,</a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="dt">recipe_type =</span> <span class="st">&quot;label&quot;</span>,</a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="dt">dim_name =</span> <span class="st">&quot;bussiness_type&quot;</span>,</a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="dt">value =</span> <span class="st">&quot;agency&quot;</span></a>
<a class="sourceLine" id="cb12-7" title="7">)</a>
<a class="sourceLine" id="cb12-8" title="8">kwr &lt;-<span class="st"> </span>kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span><span class="kw">kwr_classify</span>(recipe_file)</a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#&gt; Label:bussiness_type</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt;   Value: agency</span></a></code></pre></div>
<p>If you look at the queries now, they are already classified.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">kwr_queries</span>()</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; # A tibble: 17 × 8</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt;    query_normalized   bussiness_type n_queries volume   cpc query_original input</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;              &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt;  1 seo                &lt;NA&gt;                   1  96000    NA seo            &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt;  2 seo meaning        &lt;NA&gt;                   1   6700    NA seo meaning    &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt;  3 london seo agenci… agency                 2   6600    NA london seo ag… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt;  4 seo services       &lt;NA&gt;                   1   6400    NA seo services   &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt;  5 what is a seo      &lt;NA&gt;                   1   5300    NA what is a seo  &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt;  6 seo london         &lt;NA&gt;                   1   5000    NA seo london     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt;  7 what is seo        &lt;NA&gt;                   1   4800    NA what is seo    &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt;  8 seo agency         agency                 1   4300    NA seo agency     &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt;  9 seo company        &lt;NA&gt;                   1   4200    NA seo company    &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">#&gt; 10 seo consultant     &lt;NA&gt;                   1   3500    NA seo consultant &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">#&gt; 11 seo service        &lt;NA&gt;                   1   3500    NA seo service    &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">#&gt; 12 seo company london &lt;NA&gt;                   1   2500    NA seo company l… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">#&gt; 13 seo agency london  agency                 1   2400    NA seo agency lo… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">#&gt; 14 seo services lond… &lt;NA&gt;                   1   2400    NA seo services … &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-20" title="20"><span class="co">#&gt; 15 seo consultants    &lt;NA&gt;                   1   2300    NA seo consultan… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-21" title="21"><span class="co">#&gt; 16 local seo          &lt;NA&gt;                   1   2200    NA local seo      &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-22" title="22"><span class="co">#&gt; 17 local seo services &lt;NA&gt;                   1   2000    NA local seo ser… &lt;NA&gt; </span></a>
<a class="sourceLine" id="cb13-23" title="23"><span class="co">#&gt; # … with 1 more variable: source &lt;chr&gt;</span></a></code></pre></div>
<p>And then you just repeat the process with other patterns.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">kwr_add_pattern</span>(<span class="st">&quot;compan&quot;</span>, recipe_file, <span class="st">&quot;label&quot;</span>, <span class="st">&quot;bussiness_type&quot;</span>, <span class="st">&quot;company&quot;</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">kwr_add_pattern</span>(<span class="st">&quot;consult&quot;</span>, recipe_file, <span class="st">&quot;label&quot;</span>, <span class="st">&quot;bussiness_type&quot;</span>, <span class="st">&quot;consultancy&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">kwr_add_pattern</span>(<span class="st">&quot;london&quot;</span>, recipe_file, <span class="st">&quot;label&quot;</span>, <span class="st">&quot;place&quot;</span>)</a>
<a class="sourceLine" id="cb14-4" title="4"></a>
<a class="sourceLine" id="cb14-5" title="5">kwr &lt;-<span class="st"> </span>kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="st">  </span><span class="kw">kwr_classify</span>(recipe_file)</a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; Label:bussiness_type</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt;   Value: agency</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#&gt;   Value: company</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">#&gt;   Value: consultancy</span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">#&gt; Label:place</span></a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span><span class="kw">kwr_queries</span>() <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="st">  </span><span class="kw">select</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">#&gt; # A tibble: 17 × 5</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">#&gt;    query_normalized    bussiness_type place  n_queries volume</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">#&gt;    &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;      &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">#&gt;  1 seo                 &lt;NA&gt;           &lt;NA&gt;           1  96000</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="co">#&gt;  2 seo meaning         &lt;NA&gt;           &lt;NA&gt;           1   6700</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co">#&gt;  3 london seo agencies agency         london         2   6600</span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="co">#&gt;  4 seo services        &lt;NA&gt;           &lt;NA&gt;           1   6400</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co">#&gt;  5 what is a seo       &lt;NA&gt;           &lt;NA&gt;           1   5300</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="co">#&gt;  6 seo london          &lt;NA&gt;           london         1   5000</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="co">#&gt;  7 what is seo         &lt;NA&gt;           &lt;NA&gt;           1   4800</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="co">#&gt;  8 seo agency          agency         &lt;NA&gt;           1   4300</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="co">#&gt;  9 seo company         company        &lt;NA&gt;           1   4200</span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co">#&gt; 10 seo consultant      consultancy    &lt;NA&gt;           1   3500</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">#&gt; 11 seo service         &lt;NA&gt;           &lt;NA&gt;           1   3500</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="co">#&gt; 12 seo company london  company        london         1   2500</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="co">#&gt; 13 seo agency london   agency         london         1   2400</span></a>
<a class="sourceLine" id="cb15-20" title="20"><span class="co">#&gt; 14 seo services london &lt;NA&gt;           london         1   2400</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="co">#&gt; 15 seo consultants     consultancy    &lt;NA&gt;           1   2300</span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="co">#&gt; 16 local seo           &lt;NA&gt;           &lt;NA&gt;           1   2200</span></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="co">#&gt; 17 local seo services  &lt;NA&gt;           &lt;NA&gt;           1   2000</span></a></code></pre></div>
</div>
</div>
<div id="exploring-the-results" class="section level2">
<h2>Exploring the results</h2>
<p>During and after the classification, you can review the overall summary of the queries.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_summary</span>()</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">#&gt; Distinct input queries:  21 </span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt; Normalized queries:      19 </span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt; Pruned queries:          17 </span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt; Classified queries:      9 </span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt; Unclassified queries:    8</span></a></code></pre></div>
<p>An overview of the values in each column (dimension) of the classification is also useful.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_dimension_table</span>(bussiness_type)</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="co">#&gt; # A tibble: 4 × 3</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co">#&gt;   bussiness_type     n volume</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#&gt;   &lt;chr&gt;          &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">#&gt; 1 &lt;NA&gt;              10 134300</span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">#&gt; 2 agency             3  13300</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">#&gt; 3 company            2   6700</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">#&gt; 4 consultancy        2   5800</span></a></code></pre></div>
</div>
<div id="exporting-results" class="section level2">
<h2>Exporting results</h2>
<p>The last step is the presentation of the results and their use in practice. For this phase, the <em>keywordr</em> package does not yet provide direct support. However, the results can be easily presented or exported by other means of the R language.</p>
<p>The following output datasets are available.</p>
<div id="classified-queries" class="section level3">
<h3>Classified queries</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_classified_queries</span>()</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="co">#&gt; # A tibble: 17 × 9</span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">#&gt;    query_normalized   bussiness_type place n_queries volume   cpc query_original</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         </span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt;  1 seo                &lt;NA&gt;           &lt;NA&gt;          1  96000    NA seo           </span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt;  2 seo meaning        &lt;NA&gt;           &lt;NA&gt;          1   6700    NA seo meaning   </span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt;  3 london seo agenci… agency         lond…         2   6600    NA london seo ag…</span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt;  4 seo services       &lt;NA&gt;           &lt;NA&gt;          1   6400    NA seo services  </span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt;  5 what is a seo      &lt;NA&gt;           &lt;NA&gt;          1   5300    NA what is a seo </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">#&gt;  6 seo london         &lt;NA&gt;           lond…         1   5000    NA seo london    </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">#&gt;  7 what is seo        &lt;NA&gt;           &lt;NA&gt;          1   4800    NA what is seo   </span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">#&gt;  8 seo agency         agency         &lt;NA&gt;          1   4300    NA seo agency    </span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt;  9 seo company        company        &lt;NA&gt;          1   4200    NA seo company   </span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt; 10 seo consultant     consultancy    &lt;NA&gt;          1   3500    NA seo consultant</span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">#&gt; 11 seo service        &lt;NA&gt;           &lt;NA&gt;          1   3500    NA seo service   </span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co">#&gt; 12 seo company london company        lond…         1   2500    NA seo company l…</span></a>
<a class="sourceLine" id="cb18-17" title="17"><span class="co">#&gt; 13 seo agency london  agency         lond…         1   2400    NA seo agency lo…</span></a>
<a class="sourceLine" id="cb18-18" title="18"><span class="co">#&gt; 14 seo services lond… &lt;NA&gt;           lond…         1   2400    NA seo services …</span></a>
<a class="sourceLine" id="cb18-19" title="19"><span class="co">#&gt; 15 seo consultants    consultancy    &lt;NA&gt;          1   2300    NA seo consultan…</span></a>
<a class="sourceLine" id="cb18-20" title="20"><span class="co">#&gt; 16 local seo          &lt;NA&gt;           &lt;NA&gt;          1   2200    NA local seo     </span></a>
<a class="sourceLine" id="cb18-21" title="21"><span class="co">#&gt; 17 local seo services &lt;NA&gt;           &lt;NA&gt;          1   2000    NA local seo ser…</span></a>
<a class="sourceLine" id="cb18-22" title="22"><span class="co">#&gt; # … with 2 more variables: input &lt;chr&gt;, source &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="unclassified-queries" class="section level3">
<h3>Unclassified queries</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_unclassified_queries</span>()</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="co">#&gt; # A tibble: 8 × 7</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="co">#&gt;   query_normalized   n_queries volume   cpc query_original     input source</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">#&gt;   &lt;chr&gt;                  &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co">#&gt; 1 seo                        1  96000    NA seo                &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">#&gt; 2 seo meaning                1   6700    NA seo meaning        &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">#&gt; 3 seo services               1   6400    NA seo services       &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">#&gt; 4 what is a seo              1   5300    NA what is a seo      &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="co">#&gt; 5 what is seo                1   4800    NA what is seo        &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co">#&gt; 6 seo service                1   3500    NA seo service        &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co">#&gt; 7 local seo                  1   2200    NA local seo          &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co">#&gt; 8 local seo services         1   2000    NA local seo services &lt;NA&gt;  &lt;NA&gt;</span></a></code></pre></div>
</div>
<div id="removed-irrelevant-queries" class="section level3">
<h3>Removed (irrelevant) queries</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">kwr <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="kw">kwr_removed_queries</span>()</a>
<a class="sourceLine" id="cb20-2" title="2"><span class="co">#&gt; # A tibble: 2 × 7</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">#&gt;   query_normalized n_queries volume   cpc query_original      input source</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt; 1 seo ye-ji                2  28000    NA seo ye-ji,seo ye ji &lt;NA&gt;  &lt;NA&gt;  </span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt; 2 joe seo                  1   4300    NA joe seo             &lt;NA&gt;  &lt;NA&gt;</span></a></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
