<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="keywordr">
<title>Recommended workflow • keywordr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Recommended workflow">
<meta property="og:description" content="keywordr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">keywordr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/workflow.html">Recommended workflow</a>
    <a class="dropdown-item" href="../articles/yaml.html">Removal and classification recipes</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MarekProkop/keywordr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Recommended workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MarekProkop/keywordr/blob/HEAD/vignettes/workflow.Rmd" class="external-link"><code>vignettes/workflow.Rmd</code></a></small>
      <div class="d-none name"><code>workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setup-and-prerequisites">Setup and prerequisites<a class="anchor" aria-label="anchor" href="#setup-and-prerequisites"></a>
</h2>
<div class="section level3">
<h3 id="used-libraries">Used libraries<a class="anchor" aria-label="anchor" href="#used-libraries"></a>
</h3>
<p>The <em>keywordr</em> package is designed to work well with <a href="https://www.tidyverse.org/" class="external-link">tidyverse</a> and I always include it in libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://marekprokop.github.io/keywordr/">keywordr</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="input-data">Input data<a class="anchor" aria-label="anchor" href="#input-data"></a>
</h3>
<p>As input data you can use either a CSV export from <a href="https://www.marketingminer.com/en" class="external-link">Marketing Miner</a> called <em>Keyword Suggestions</em> or a dataframe (or <em>tibble</em>) with the following structure:</p>
<pre><code><span class="co">#&gt; 'data.frame':    0 obs. of  5 variables:</span>
<span class="co">#&gt;  $ query : chr </span>
<span class="co">#&gt;  $ volume: int </span>
<span class="co">#&gt;  $ cpc   : num </span>
<span class="co">#&gt;  $ input : chr </span>
<span class="co">#&gt;  $ source: chr</span></code></pre>
<p>Only the first two columns are required, the other three (<code>cpc</code>, <code>input</code> and <code>source</code>) are optional.</p>
<p>For the purposes of this tutorial, I will use the first method and prepare the input data first.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">input_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span>
  <span class="op">~</span><span class="va">query</span>,             <span class="op">~</span><span class="va">volume</span>,
  <span class="st">"seo"</span>,                <span class="fl">96000</span>,
  <span class="st">"seo ye-ji"</span>,          <span class="fl">22000</span>,
  <span class="st">"seo meaning"</span>,         <span class="fl">6700</span>,
  <span class="st">"seo services"</span>,        <span class="fl">6400</span>,
  <span class="st">"seo ye ji"</span>,           <span class="fl">6000</span>,
  <span class="st">"what is a seo"</span>,       <span class="fl">5300</span>,
  <span class="st">"seo london"</span>,          <span class="fl">5000</span>,
  <span class="st">"what is seo"</span>,         <span class="fl">4800</span>,
  <span class="st">"seo agency"</span>,          <span class="fl">4300</span>,
  <span class="st">"joe seo"</span>,             <span class="fl">4300</span>,
  <span class="st">"seo company"</span>,         <span class="fl">4200</span>,
  <span class="st">"london seo agencies"</span>, <span class="fl">4100</span>,
  <span class="st">"seo consultant"</span>,      <span class="fl">3500</span>,
  <span class="st">"seo service"</span>,         <span class="fl">3500</span>,
  <span class="st">"seo company london"</span>,  <span class="fl">2500</span>,
  <span class="st">"seo agencies london"</span>, <span class="fl">2500</span>,
  <span class="st">"seo agency london"</span>,   <span class="fl">2400</span>,
  <span class="st">"seo services london"</span>, <span class="fl">2400</span>,
  <span class="st">"seo consultants"</span>,     <span class="fl">2300</span>,
  <span class="st">"local seo"</span>,           <span class="fl">2200</span>,
  <span class="st">"local seo services"</span>,  <span class="fl">2000</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">input_data</span>, n <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 2</span></span>
<span class="co">#&gt;    query               volume</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                  <span style="text-decoration: underline;">96</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo ye-ji            <span style="text-decoration: underline;">22</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> seo meaning           <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> seo services          <span style="text-decoration: underline;">6</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> seo ye ji             <span style="text-decoration: underline;">6</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> what is a seo         <span style="text-decoration: underline;">5</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> seo london            <span style="text-decoration: underline;">5</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> what is seo           <span style="text-decoration: underline;">4</span>800</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> seo agency            <span style="text-decoration: underline;">4</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> joe seo               <span style="text-decoration: underline;">4</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo company           <span style="text-decoration: underline;">4</span>200</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> london seo agencies   <span style="text-decoration: underline;">4</span>100</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo consultant        <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo service           <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo company london    <span style="text-decoration: underline;">2</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> seo agencies london   <span style="text-decoration: underline;">2</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> seo agency london     <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">18</span> seo services london   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">19</span> seo consultants       <span style="text-decoration: underline;">2</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">20</span> local seo             <span style="text-decoration: underline;">2</span>200</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">21</span> local seo services    <span style="text-decoration: underline;">2</span>000</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a-kwresearch-object">A <code>kwresearch</code> object<a class="anchor" aria-label="anchor" href="#a-kwresearch-object"></a>
</h3>
<p>All data is stored in an object of class <code>kwresearch</code> during keyword analysis. Therefore, create such an object, called for example <code>kwr</code>, right at the beginning. In the same function call, you can also import input data into it. For English (or other languages that do not use diacritics), I recommend setting <code>accentize</code> to <code>FALSE</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/kwresearch.html">kwresearch</a></span><span class="op">(</span><span class="va">input_data</span>, accentize <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>Now you can check the data are in.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_queries.html">kwr_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 19 × 7</span></span>
<span class="co">#&gt;    query_normalized    n_queries volume   cpc query_original        input source</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                         1  <span style="text-decoration: underline;">96</span>000    <span style="color: #BB0000;">NA</span> seo                   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo ye-ji                   2  <span style="text-decoration: underline;">28</span>000    <span style="color: #BB0000;">NA</span> seo ye ji,seo ye-ji   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> seo meaning                 1   <span style="text-decoration: underline;">6</span>700    <span style="color: #BB0000;">NA</span> seo meaning           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> london seo agencies         2   <span style="text-decoration: underline;">6</span>600    <span style="color: #BB0000;">NA</span> london seo agencies,… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> seo services                1   <span style="text-decoration: underline;">6</span>400    <span style="color: #BB0000;">NA</span> seo services          <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> what is a seo               1   <span style="text-decoration: underline;">5</span>300    <span style="color: #BB0000;">NA</span> what is a seo         <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> seo london                  1   <span style="text-decoration: underline;">5</span>000    <span style="color: #BB0000;">NA</span> seo london            <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> what is seo                 1   <span style="text-decoration: underline;">4</span>800    <span style="color: #BB0000;">NA</span> what is seo           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> joe seo                     1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> joe seo               <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> seo agency                  1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> seo agency            <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo company                 1   <span style="text-decoration: underline;">4</span>200    <span style="color: #BB0000;">NA</span> seo company           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> seo consultant              1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo consultant        <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo service                 1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo service           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo company london          1   <span style="text-decoration: underline;">2</span>500    <span style="color: #BB0000;">NA</span> seo company london    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo agency london           1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo agency london     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> seo services london         1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo services london   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> seo consultants             1   <span style="text-decoration: underline;">2</span>300    <span style="color: #BB0000;">NA</span> seo consultants       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">18</span> local seo                   1   <span style="text-decoration: underline;">2</span>200    <span style="color: #BB0000;">NA</span> local seo             <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">19</span> local seo services          1   <span style="text-decoration: underline;">2</span>000    <span style="color: #BB0000;">NA</span> local seo services    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></code></pre></div>
<p>Note that queries ‘seo ye-ji’ and ‘seo ye ji’ were combined together. This is the result of <em>normalization</em>, which tries to unify queries that differ only by punctuation, accents or order of words. If you don’t like the result, you can switch normalization off with the <code>normalize</code> argument.</p>
<p>You are ready for pruning and classification now.</p>
</div>
</div>
<div class="section level2">
<h2 id="pruning">Pruning<a class="anchor" aria-label="anchor" href="#pruning"></a>
</h2>
<p>Pruning is a process in which you remove irrelevant queries. While they still remain in the source data and can be displayed in some outputs, they do not bother you during classification.</p>
<p>Your task is to find the patterns that determine the irrelevant queries and to specify these patterns as regular expressions. Because there are so few queries in the example, we can spot these formulas at a glance. They are the words or phrases ‘ye-ji’ and ‘joe’.</p>
<p>You remove the queries matching these patterns as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">recipe_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"recipes.yml"</span><span class="op">)</span>

<span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span><span class="st">"ye-ji"</span>, <span class="va">recipe_file</span>, recipe_type <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span>
<span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span><span class="st">"joe"</span>, <span class="va">recipe_file</span>, recipe_type <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span>

<span class="va">kwr</span> <span class="op">&lt;-</span> <span class="va">kwr</span> |&gt; 
  <span class="fu"><a href="../reference/kwr_prune.html">kwr_prune</a></span><span class="op">(</span><span class="va">recipe_file</span><span class="op">)</span>
<span class="co">#&gt; Removing queries...</span>
<span class="co">#&gt; Removed 2 queries out of 19. Duration: 0.006s</span></code></pre></div>
<p>If you check the queries now, you will find that the irrelevant ones are already missing.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_queries.html">kwr_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 7</span></span>
<span class="co">#&gt;    query_normalized    n_queries volume   cpc query_original        input source</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                         1  <span style="text-decoration: underline;">96</span>000    <span style="color: #BB0000;">NA</span> seo                   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo meaning                 1   <span style="text-decoration: underline;">6</span>700    <span style="color: #BB0000;">NA</span> seo meaning           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> london seo agencies         2   <span style="text-decoration: underline;">6</span>600    <span style="color: #BB0000;">NA</span> london seo agencies,… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> seo services                1   <span style="text-decoration: underline;">6</span>400    <span style="color: #BB0000;">NA</span> seo services          <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> what is a seo               1   <span style="text-decoration: underline;">5</span>300    <span style="color: #BB0000;">NA</span> what is a seo         <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> seo london                  1   <span style="text-decoration: underline;">5</span>000    <span style="color: #BB0000;">NA</span> seo london            <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> what is seo                 1   <span style="text-decoration: underline;">4</span>800    <span style="color: #BB0000;">NA</span> what is seo           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> seo agency                  1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> seo agency            <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> seo company                 1   <span style="text-decoration: underline;">4</span>200    <span style="color: #BB0000;">NA</span> seo company           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> seo consultant              1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo consultant        <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo service                 1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo service           <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> seo company london          1   <span style="text-decoration: underline;">2</span>500    <span style="color: #BB0000;">NA</span> seo company london    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo agency london           1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo agency london     <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo services london         1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo services london   <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo consultants             1   <span style="text-decoration: underline;">2</span>300    <span style="color: #BB0000;">NA</span> seo consultants       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> local seo                   1   <span style="text-decoration: underline;">2</span>200    <span style="color: #BB0000;">NA</span> local seo             <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> local seo services          1   <span style="text-decoration: underline;">2</span>000    <span style="color: #BB0000;">NA</span> local seo services    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></code></pre></div>
<div class="section level4">
<h4 id="what-exactly-happened">What exactly happened<a class="anchor" aria-label="anchor" href="#what-exactly-happened"></a>
</h4>
<p>Using the <code>kwr_add_pattern</code> function, you created a recipe file called ‘recipes.yml’ in the temporary directory and wrote the ‘ye-ji’ and ‘joe’ patterns into it. The recipe type is <code>remove</code>, which means that queries matching the recipe should be removed. You can read more about recipes and their structure in the ‘Removal and classification recipes’ vignette.</p>
<p>You then applied the <code>kwr_prune</code> function to the <code>kwr</code> object, which executed all recipes with type <code>remove</code> from the recipe file.</p>
<p>On such small data the effect of this method does not show much, but consider that on data of the usual size one pattern can capture and thus remove possibly hundreds of queries.</p>
</div>
</div>
<div class="section level2">
<h2 id="classification">Classification<a class="anchor" aria-label="anchor" href="#classification"></a>
</h2>
<p>Your next and actually main task is to classify the queries. We will start with exploration, which is supported by three functions: <code>kwr_subqueries</code>, <code>kwr_collocations</code> and <code>kwr_ngrams</code>.</p>
<div class="section level3">
<h3 id="exploration">Exploration<a class="anchor" aria-label="anchor" href="#exploration"></a>
</h3>
<div class="section level4">
<h4 id="n-grams">N-grams<a class="anchor" aria-label="anchor" href="#n-grams"></a>
</h4>
<p>The <code>kwr_ngrams</code> function returns so-called n-grams, i.e. single words or multi-word phrases contained in the queries. The output is sorted by the number of queries in which the n-gram is found, however you can reorder it using the <code>arrange</code> function from the <em>dplyr</em> package by search volume.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_ngrams.html">kwr_ngrams</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 19 × 3</span></span>
<span class="co">#&gt;    token                   n volume</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                    17 <span style="text-decoration: underline;">160</span>100</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> london                  5  <span style="text-decoration: underline;">18</span>900</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> seo services            3  <span style="text-decoration: underline;">10</span>800</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> what is                 2  <span style="text-decoration: underline;">10</span>100</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> seo agency              2   <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> seo company             2   <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> local seo               2   <span style="text-decoration: underline;">4</span>200</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> seo meaning             1   <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> london seo agencies     1   <span style="text-decoration: underline;">6</span>600</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> what is a seo           1   <span style="text-decoration: underline;">5</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo london              1   <span style="text-decoration: underline;">5</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> what is seo             1   <span style="text-decoration: underline;">4</span>800</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo consultant          1   <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo service             1   <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo company london      1   <span style="text-decoration: underline;">2</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> seo agency london       1   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> seo services london     1   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">18</span> seo consultants         1   <span style="text-decoration: underline;">2</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">19</span> local seo services      1   <span style="text-decoration: underline;">2</span>000</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="subqueries">Subqueries<a class="anchor" aria-label="anchor" href="#subqueries"></a>
</h4>
<p>Subqueries are essentially n-grams that also exist as separate queries. In other words, they are queries that are entirely and exactly contained in other, longer queries.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_subqueries.html">kwr_subqueries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span>
<span class="co">#&gt;   token            n volume</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> seo             16  <span style="text-decoration: underline;">64</span>100</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> seo services     2   <span style="text-decoration: underline;">4</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> seo company      1   <span style="text-decoration: underline;">2</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> seo agency       1   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> local seo        1   <span style="text-decoration: underline;">2</span>000</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="collocations">Collocations<a class="anchor" aria-label="anchor" href="#collocations"></a>
</h4>
<p>Collocations are at least two-word phrases that are more likely to occur in queries than the single words that make them up. They are useful for detecting typical multi-word phrases.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_collocations.html">kwr_collocations</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 6</span></span>
<span class="co">#&gt;   collocation  count count_nested length lambda     z</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> what is          2            2      2   5.42  2.57</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> local seo        2            1      2   3.33  2.01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> seo services     3            2      2   2.04  1.30</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> seo agency       2            1      2   1.61  1.00</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> seo company      2            1      2   1.61  1.00</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="pattern-testing">Pattern testing<a class="anchor" aria-label="anchor" href="#pattern-testing"></a>
</h3>
<p>When you discover a useful pattern during your research, it’s a good idea to test it. The <code>kwr_test_regex</code> function is used for this purpose.</p>
<p>Let’s try the pattern “agenc”.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pattern</span> <span class="op">&lt;-</span> <span class="st">"agenc"</span>
<span class="fu"><a href="../reference/kwr_test_regex.html">kwr_test_regex</a></span><span class="op">(</span><span class="va">kwr</span>, <span class="va">pattern</span><span class="op">)</span>
<span class="co">#&gt; $full</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 5</span></span>
<span class="co">#&gt;   query_normalized    pred       word     succ     match</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> london seo agencies london seo agencies <span style="color: #949494;">""</span>       agenc</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> seo agency          seo        agency   <span style="color: #949494;">""</span>       agenc</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> seo agency london   seo        agency   <span style="color: #949494;">"</span>london<span style="color: #949494;">"</span> agenc</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $words</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="co">#&gt;   word         n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> agency       2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> agencies     1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $around</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span>
<span class="co">#&gt;   around         n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> seo            2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> london         1</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> london seo     1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $around_ngrams</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span>
<span class="co">#&gt;   token          n</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> london         2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> seo            2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> london seo     1</span></code></pre></div>
<p>As a result you get 4 tables:</p>
<ul>
<li>The first one contains all the queries that match the formula, and from the other columns you can clearly see what is before and after the matched text in the queries.</li>
<li>The second contains a list of the full words or phrases that match the pattern.</li>
<li>The third contains a list of unique texts that are located before and after the text that matches the pattern.</li>
<li>Finally, the fourth contains the n-grams constructed from the texts in the third table.</li>
</ul>
</div>
<div class="section level3">
<h3 id="recipe-creation-and-the-classification-itself">Recipe creation and the classification itself<a class="anchor" aria-label="anchor" href="#recipe-creation-and-the-classification-itself"></a>
</h3>
<p>After you have tested it, you create a classification recipe from the pattern, just as you have previously created pruning recipes. Then you call the <code>kwr_classify</code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span>
  pattern <span class="op">=</span> <span class="va">pattern</span>,
  recipe_file <span class="op">=</span> <span class="va">recipe_file</span>,
  recipe_type <span class="op">=</span> <span class="st">"label"</span>,
  dim_name <span class="op">=</span> <span class="st">"bussiness_type"</span>,
  value <span class="op">=</span> <span class="st">"agency"</span>
<span class="op">)</span>
<span class="va">kwr</span> <span class="op">&lt;-</span> <span class="va">kwr</span> |&gt; 
  <span class="fu"><a href="../reference/kwr_classify.html">kwr_classify</a></span><span class="op">(</span><span class="va">recipe_file</span><span class="op">)</span>
<span class="co">#&gt; Label:bussiness_type</span>
<span class="co">#&gt;   Value: agency</span></code></pre></div>
<p>If you look at the queries now, they are already classified.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; 
  <span class="fu"><a href="../reference/kwr_queries.html">kwr_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 8</span></span>
<span class="co">#&gt;    query_normalized   bussiness_type n_queries volume   cpc query_original input</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                <span style="color: #BB0000;">NA</span>                     1  <span style="text-decoration: underline;">96</span>000    <span style="color: #BB0000;">NA</span> seo            <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo meaning        <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">6</span>700    <span style="color: #BB0000;">NA</span> seo meaning    <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> london seo agenci… agency                 2   <span style="text-decoration: underline;">6</span>600    <span style="color: #BB0000;">NA</span> london seo ag… <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> seo services       <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">6</span>400    <span style="color: #BB0000;">NA</span> seo services   <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> what is a seo      <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">5</span>300    <span style="color: #BB0000;">NA</span> what is a seo  <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> seo london         <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">5</span>000    <span style="color: #BB0000;">NA</span> seo london     <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> what is seo        <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">4</span>800    <span style="color: #BB0000;">NA</span> what is seo    <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> seo agency         agency                 1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> seo agency     <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> seo company        <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">4</span>200    <span style="color: #BB0000;">NA</span> seo company    <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> seo consultant     <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo consultant <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo service        <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo service    <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> seo company london <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">2</span>500    <span style="color: #BB0000;">NA</span> seo company l… <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo agency london  agency                 1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo agency lo… <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo services lond… <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo services … <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo consultants    <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">2</span>300    <span style="color: #BB0000;">NA</span> seo consultan… <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> local seo          <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">2</span>200    <span style="color: #BB0000;">NA</span> local seo      <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> local seo services <span style="color: #BB0000;">NA</span>                     1   <span style="text-decoration: underline;">2</span>000    <span style="color: #BB0000;">NA</span> local seo ser… <span style="color: #BB0000;">NA</span>   </span>
<span class="co">#&gt; <span style="color: #949494;"># … with 1 more variable: source &lt;chr&gt;</span></span></code></pre></div>
<p>And then you just repeat the process with other patterns.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span><span class="st">"compan"</span>, <span class="va">recipe_file</span>, <span class="st">"label"</span>, <span class="st">"bussiness_type"</span>, <span class="st">"company"</span><span class="op">)</span>
<span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span><span class="st">"consult"</span>, <span class="va">recipe_file</span>, <span class="st">"label"</span>, <span class="st">"bussiness_type"</span>, <span class="st">"consultancy"</span><span class="op">)</span>
<span class="fu"><a href="../reference/kwr_add_pattern.html">kwr_add_pattern</a></span><span class="op">(</span><span class="st">"london"</span>, <span class="va">recipe_file</span>, <span class="st">"label"</span>, <span class="st">"place"</span><span class="op">)</span>

<span class="va">kwr</span> <span class="op">&lt;-</span> <span class="va">kwr</span> |&gt; 
  <span class="fu"><a href="../reference/kwr_classify.html">kwr_classify</a></span><span class="op">(</span><span class="va">recipe_file</span><span class="op">)</span>
<span class="co">#&gt; Label:bussiness_type</span>
<span class="co">#&gt;   Value: agency</span>
<span class="co">#&gt;   Value: company</span>
<span class="co">#&gt;   Value: consultancy</span>
<span class="co">#&gt; Label:place</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; 
  <span class="fu"><a href="../reference/kwr_queries.html">kwr_queries</a></span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 5</span></span>
<span class="co">#&gt;    query_normalized    bussiness_type place  n_queries volume</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1  <span style="text-decoration: underline;">96</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo meaning         <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> london seo agencies agency         london         2   <span style="text-decoration: underline;">6</span>600</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> seo services        <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">6</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> what is a seo       <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">5</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> seo london          <span style="color: #BB0000;">NA</span>             london         1   <span style="text-decoration: underline;">5</span>000</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> what is seo         <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">4</span>800</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> seo agency          agency         <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">4</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> seo company         company        <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">4</span>200</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> seo consultant      consultancy    <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo service         <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">3</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> seo company london  company        london         1   <span style="text-decoration: underline;">2</span>500</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo agency london   agency         london         1   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo services london <span style="color: #BB0000;">NA</span>             london         1   <span style="text-decoration: underline;">2</span>400</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo consultants     consultancy    <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">2</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> local seo           <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">2</span>200</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> local seo services  <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>             1   <span style="text-decoration: underline;">2</span>000</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="exploring-the-results">Exploring the results<a class="anchor" aria-label="anchor" href="#exploring-the-results"></a>
</h2>
<p>During and after the classification, you can review the overall summary of the queries.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_summary.html">kwr_summary</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Distinct input queries:  21 </span>
<span class="co">#&gt; Normalized queries:      19 </span>
<span class="co">#&gt; Pruned queries:          17 </span>
<span class="co">#&gt; Classified queries:      9 </span>
<span class="co">#&gt; Unclassified queries:    8</span></code></pre></div>
<p>An overview of the values in each column (dimension) of the classification is also useful.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_dimension_table.html">kwr_dimension_table</a></span><span class="op">(</span><span class="va">bussiness_type</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span>
<span class="co">#&gt;   bussiness_type     n volume</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #BB0000;">NA</span>                10 <span style="text-decoration: underline;">134</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> agency             3  <span style="text-decoration: underline;">13</span>300</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> company            2   <span style="text-decoration: underline;">6</span>700</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> consultancy        2   <span style="text-decoration: underline;">5</span>800</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exporting-results">Exporting results<a class="anchor" aria-label="anchor" href="#exporting-results"></a>
</h2>
<p>The last step is the presentation of the results and their use in practice. For this phase, the <em>keywordr</em> package does not yet provide direct support. However, the results can be easily presented or exported by other means of the R language.</p>
<p>The following output datasets are available.</p>
<div class="section level3">
<h3 id="classified-queries">Classified queries<a class="anchor" aria-label="anchor" href="#classified-queries"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_classified_queries.html">kwr_classified_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 17 × 9</span></span>
<span class="co">#&gt;    query_normalized   bussiness_type place n_queries volume   cpc query_original</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> seo                <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1  <span style="text-decoration: underline;">96</span>000    <span style="color: #BB0000;">NA</span> seo           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> seo meaning        <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">6</span>700    <span style="color: #BB0000;">NA</span> seo meaning   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> london seo agenci… agency         lond…         2   <span style="text-decoration: underline;">6</span>600    <span style="color: #BB0000;">NA</span> london seo ag…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> seo services       <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">6</span>400    <span style="color: #BB0000;">NA</span> seo services  </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> what is a seo      <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">5</span>300    <span style="color: #BB0000;">NA</span> what is a seo </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> seo london         <span style="color: #BB0000;">NA</span>             lond…         1   <span style="text-decoration: underline;">5</span>000    <span style="color: #BB0000;">NA</span> seo london    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> what is seo        <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">4</span>800    <span style="color: #BB0000;">NA</span> what is seo   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> seo agency         agency         <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> seo agency    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> seo company        company        <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">4</span>200    <span style="color: #BB0000;">NA</span> seo company   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> seo consultant     consultancy    <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo consultant</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> seo service        <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo service   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> seo company london company        lond…         1   <span style="text-decoration: underline;">2</span>500    <span style="color: #BB0000;">NA</span> seo company l…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> seo agency london  agency         lond…         1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo agency lo…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> seo services lond… <span style="color: #BB0000;">NA</span>             lond…         1   <span style="text-decoration: underline;">2</span>400    <span style="color: #BB0000;">NA</span> seo services …</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> seo consultants    consultancy    <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">2</span>300    <span style="color: #BB0000;">NA</span> seo consultan…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">16</span> local seo          <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">2</span>200    <span style="color: #BB0000;">NA</span> local seo     </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">17</span> local seo services <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>            1   <span style="text-decoration: underline;">2</span>000    <span style="color: #BB0000;">NA</span> local seo ser…</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: input &lt;chr&gt;, source &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="unclassified-queries">Unclassified queries<a class="anchor" aria-label="anchor" href="#unclassified-queries"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_unclassified_queries.html">kwr_unclassified_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 7</span></span>
<span class="co">#&gt;   query_normalized   n_queries volume   cpc query_original     input source</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> seo                        1  <span style="text-decoration: underline;">96</span>000    <span style="color: #BB0000;">NA</span> seo                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> seo meaning                1   <span style="text-decoration: underline;">6</span>700    <span style="color: #BB0000;">NA</span> seo meaning        <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> seo services               1   <span style="text-decoration: underline;">6</span>400    <span style="color: #BB0000;">NA</span> seo services       <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> what is a seo              1   <span style="text-decoration: underline;">5</span>300    <span style="color: #BB0000;">NA</span> what is a seo      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> what is seo                1   <span style="text-decoration: underline;">4</span>800    <span style="color: #BB0000;">NA</span> what is seo        <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> seo service                1   <span style="text-decoration: underline;">3</span>500    <span style="color: #BB0000;">NA</span> seo service        <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">7</span> local seo                  1   <span style="text-decoration: underline;">2</span>200    <span style="color: #BB0000;">NA</span> local seo          <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">8</span> local seo services         1   <span style="text-decoration: underline;">2</span>000    <span style="color: #BB0000;">NA</span> local seo services <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="removed-irrelevant-queries">Removed (irrelevant) queries<a class="anchor" aria-label="anchor" href="#removed-irrelevant-queries"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kwr</span> |&gt; <span class="fu"><a href="../reference/kwr_removed_queries.html">kwr_removed_queries</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="co">#&gt;   query_normalized n_queries volume   cpc query_original      input source</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> seo ye-ji                2  <span style="text-decoration: underline;">28</span>000    <span style="color: #BB0000;">NA</span> seo ye ji,seo ye-ji <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> joe seo                  1   <span style="text-decoration: underline;">4</span>300    <span style="color: #BB0000;">NA</span> joe seo             <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marek Prokop.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
